services:
  magic-bag-gateway:
    build:
      context: .
      dockerfile: magic-bag-gateway/Dockerfile
      args:
        APP_PORT: 10016
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-gateway
    ports:
      - "10016:10016"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-auth:
    build:
      context: .
      dockerfile: magic-bag-auth/Dockerfile
      args:
        APP_PORT: 10017
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-auth
    ports:
      - "10017:10017"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-user:
    build:
      context: .
      dockerfile: magic-bag-user/Dockerfile
      args:
        APP_PORT: 10018
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-user
    ports:
      - "10018:10018"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-product:
    build:
      context: .
      dockerfile: magic-bag-product/Dockerfile
      args:
        APP_PORT: 10019
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-product
    ports:
      - "10019:10019"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-order:
    build:
      context: .
      dockerfile: magic-bag-order/Dockerfile
      args:
        APP_PORT: 10020
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-order
    ports:
      - "10020:10020"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-payment:
    build:
      context: .
      dockerfile: magic-bag-payment/Dockerfile
      args:
        APP_PORT: 10021
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-payment
    ports:
      - "10021:10021"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-cart:
    build:
      context: .
      dockerfile: magic-bag-cart/Dockerfile
      args:
        APP_PORT: 10022
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-cart
    ports:
      - "10022:10022"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-merchant:
    build:
      context: .
      dockerfile: magic-bag-merchant/Dockerfile
      args:
        APP_PORT: 10023
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-merchant
    ports:
      - "10023:10023"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev

  magic-bag-admin:
    build:
      context: .
      dockerfile: magic-bag-admin/Dockerfile
      args:
        APP_PORT: 10024
        TZ: Asia/Singapore
        SERVICE_NAME: magic-bag-admin
    ports:
      - "10024:10024"
    volumes:
      - ~/Code/magic-bag-parent/.keys:/app/.keys:ro   # 将宿主机的 .keys 挂载到容器的 /.keys
    environment:
      - SPRING_CLOUD_NACOS_CONFIG_SERVER_ADDR=54.169.196.90:8848
      - SPRING_CLOUD_NACOS_DISCOVERY_SERVER_ADDR=54.169.196.90:8848
      - SPRING_PROFILES_ACTIVE=dev